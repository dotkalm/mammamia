import React from 'react'
import KDBush from 'kdbush'

const Geo = () => {
    function distance(lat1, lon1, lat2, lon2, unit) {
	if ((lat1 === lat2) && (lon1 === lon2)) {
		return 0;
	}
	else {
		var radlat1 = Math.PI * lat1/180;
		var radlat2 = Math.PI * lat2/180;
		var theta = lon1-lon2;
		var radtheta = Math.PI * theta/180;
		var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
		if (dist > 1) {
			dist = 1;
		}
		dist = Math.acos(dist);
		dist = dist * 180/Math.PI;
		dist = dist * 60 * 1.1515;
		if (unit==="K") { dist = dist * 1.609344 }
		if (unit==="N") { dist = dist * 0.8684 }
		return dist;
	}
}
    const points = [[34.80934423456639, -118.59563556755867], [34.668788230289024, -116.59849808514397], [34.70841011090564, -118.36877938404218], [33.799082727588555, -116.18999119986786], [32.88712403617885, -116.25898707490062], [33.89959198093087, -118.03595082385984], [33.18793256139269, -117.37253111563652], [33.999795196095725, -119.75470328063813], [34.538315663581436, -117.55276446861095], [34.922983626997606, -116.27502909960776], [34.69756794490425, -119.27621908385802], [33.97273345655455, -116.92885614798102], [33.669566557825924, -116.01543435104944], [33.66013724576666, -116.9692111498206], [34.47392158653281, -116.91657844451089], [34.80940905974241, -116.67848626047066], [34.62038257222068, -117.14665793479999], [34.151513486806614, -118.36677164541094], [33.65108051455599, -116.64272109759031], [33.02382962087341, -116.28783279241028], [34.85185401221503, -117.37468765066994], [34.714819023438274, -116.36226632873095], [34.02648052823978, -117.96201663921183], [34.23559262229707, -119.16993344092873], [33.85740591981028, -117.29096538532598], [34.80865753489622, -117.83915235651536], [32.82100063445068, -116.77183611686748], [34.359140859622926, -117.48532664768167], [34.860261786026946, -119.83610308089258], [33.090083837571214, -116.0123044961428], [33.85879715554007, -116.88886534210737], [32.935949383703964, -116.76830691871643], [34.183819760347625, -116.75229508065948], [32.710410829286, -116.61409505642072], [34.54234150321986, -119.15018294502407], [33.24670062480777, -117.07490622320222], [34.56094895800797, -118.42915376146605], [32.891205648090235, -116.01852898700145], [34.33763146745145, -116.34227102149681], [34.093809985284196, -117.90718115863028], [33.78400909710301, -118.24441020317762], [34.830313715732174, -118.38200765832026], [33.85556947828817, -118.03412639553923], [34.82902764624633, -119.70629721119825], [33.311555339680204, -116.76321219910906], [32.86521518208609, -116.660074180056], [34.6925248900163, -117.07181712601746], [34.22663681416879, -117.5734173657329], [34.83834986541455, -116.87410861145419], [34.91148786659008, -117.14775699359245], [33.89248365509625, -116.09202332835864], [33.90571666395363, -116.39087843843417], [33.93536575055185, -117.62451425713361], [33.07457369860952, -116.4408293560773], [34.44086967346136, -117.18962046621644], [34.64789004031198, -119.60692732101684], [34.40500434526495, -117.59765183192015], [34.43164897373343, -117.88781874162086], [34.75069833280518, -118.77256863134953], [34.88562058809242, -118.50875114154248], [33.5808226983787, -116.45986036251992], [34.07339458895146, -117.62254118406076], [33.712618393663, -116.97179446963874], [33.17760233108805, -117.19432913851377], [34.959982335690285, -117.06723995792883], [34.48191570426863, -117.89077415731128], [33.49670779096159, -117.05079290886617], [33.95843174405739, -116.37671555503174], [34.64890140508936, -117.45475147171476], [34.25442428808861, -117.34193776868977], [33.78245588082045, -116.171655721463], [34.63045157113745, -118.45009522686365], [34.69995240239301, -117.84728307686342], [34.86700447708445, -117.35963502878343], [34.93083430356633, -117.21864526361618], [34.007013303041354, -119.68043894665675], [33.89938980393272, -117.08653746030555], [34.7140449143021, -117.29269011590469], [34.39274998618496, -117.38520918691489], [33.55465212988751, -116.82185490438381], [32.72191090707052, -116.30384663740737], [34.542794399581055, -116.0265280083058], [34.883112413616175, -116.31837129751996], [34.794009998842654, -117.45122569741723], [34.992570331427004, -117.58917925509151], [33.65403953903219, -117.47723516511623], [33.71365468507526, -117.37440717870604], [32.99326696846164, -116.51349470340375], [34.67295651091609, -118.50559247243426], [34.70749780054439, -118.64344702998979], [33.74462516770084, -116.64036464871522], [34.023397621042776, -118.0897772710937], [33.63352675153154, -116.91697058924596], [34.900051969289535, -118.59180370069866], [33.487155856303936, -116.10159793168626], [32.712735109452105, -116.80914853013685], [33.770079755462085, -117.84406996029556], [34.72698671183613, -119.47942142495968], [33.860340286658186, -116.8868826850436], [34.10120878778787, -118.60930823013257], [33.538988458031916, -117.17938150299649], [34.96170807679729, -116.54558047246324], [33.05472082291236, -117.22956113411799], [34.187189942518614, -118.15415732954774], [34.94425177854339, -119.84841246214448], [32.928142291924964, -116.7809306629865], [34.09956553528857, -116.22799538701877], [34.8963716149069, -117.45028398112007], [34.67699295761659, -117.42433346423813], [33.79573762528167, -117.64992730091348], [33.89493940227452, -117.72519162776655], [34.724888450227155, -117.38423700387887], [34.49980878193195, -118.63350291352576], [33.64195207180706, -117.48449742678682], [33.199114155520746, -116.6237862577157], [34.45331858152955, -119.81505356444734], [34.538543268746224, -119.15425776098432], [33.159158610163935, -116.08643749742926], [33.87531992621066, -118.30397756840334], [33.774229873247236, -117.72340931244048], [32.710948788903465, -116.05879823706915], [34.380965002885034, -116.81464184373469], [34.69793903093147, -117.04015480938908], [34.433429330974796, -116.98164512434256], [33.98819240186565, -116.02119980674395], [34.239989202825925, -117.53358740854203], [34.9741783561636, -119.33181357898884], [33.988679642274775, -116.23548446782634], [34.89268864200009, -116.11453743761125], [33.90402287499828, -118.21738415457516], [34.49399085807297, -118.96293713194996], [34.033843104965264, -116.39574657714485], [34.301981249392675, -119.15194869938094], [33.88562888109954, -117.72554661260367], [34.036875595638165, -116.60102576320953], [34.65469551810426, -118.70853165363673], [33.90484772113649, -116.24853433911461], [33.82313774158199, -116.95574587531439], [34.041201331190294, -118.74409035055193], [33.88362911702809, -116.35174534476836], [34.49984685624854, -118.65591003164026], [33.14206628222841, -116.73084866371312], [33.94268012228588, -117.83907438414656], [33.51364117732121, -117.14333674174071], [34.03812328100602, -118.8082291586447], [32.76310778656291, -117.24320773711797], [33.862902220790865, -116.31931302156347], [32.74766489920688, -116.4960176978863], [34.8623180535377, -116.08458087877521], [34.28383010008522, -118.32694757854453], [33.826210584112346, -116.14740045031336], [34.447328292190036, -119.65969278074114], [34.82014014777094, -118.90775119129954], [33.5548471945169, -116.08426995261124], [34.20869760665747, -116.8957781571602], [33.08168933432149, -116.80838098846468], [33.73304126091551, -117.88448478941659], [34.66612385457522, -117.46761390438084], [34.730650134454194, -116.75587362047946], [34.3550705122385, -118.16121815364615], [34.79813772985937, -117.10859307149242], [33.16788037294495, -116.0234839827417], [33.631577176026795, -116.40517551280762], [32.680512150412845, -116.2740687929308], [34.58264922708057, -117.30939217409112], [34.67060176587164, -116.2113407178868], [34.57308884523147, -116.11853096889786], [33.27319705931757, -116.76253408699732], [33.59828803353525, -117.70460853774881], [34.18613453651064, -117.14051991314082], [34.322789905485465, -118.4440560076455], [34.76392213008389, -117.59066647206274], [34.261334291830345, -118.92688837767639], [34.641239792625136, -119.66345221930307], [34.62205027410306, -119.67983330602819], [34.0777968051838, -117.48557618384129], [34.068982298624746, -116.90289484589634], [34.699271141833435, -119.2200206065396], [34.85821457021759, -117.91639671669547], [33.183319529636144, -116.42167873721247], [34.78011370600266, -116.80367531798342], [34.13011904689233, -117.27866034017664], [34.782708959353066, -118.1993384852781], [33.705774699290195, -117.43085270950921], [34.839315947810604, -117.19576599462481], [33.92433634835954, -116.12948353825348], [33.38100036176427, -116.99636487813721], [34.702456873777734, -118.09680137331178], [34.68700770272502, -116.47105544129121], [34.65713851798066, -118.4015063953957], [34.38984921768233, -118.17417521870797], [33.6193587045959, -116.23099655516769], [34.50083599099544, -119.65943424707204], [33.73107275807004, -116.48645395567513], [34.356039149342756, -119.223913037766], [34.136126508262755, -116.47518303939651], [33.70110089129512, -117.7252863412832], [34.74659082890767, -116.87286600021095], [34.79459605316635, -117.17399589379448], [32.768350075401464, -116.62582336276253], [33.25007016672761, -116.96320241301024], [34.34563375246666, -118.25940092193247], [32.90116070175955, -116.85560936712575], [34.88376804990115, -118.51096454986245], [33.987951144448424, -117.41365244025768], [33.723952457177546, -116.30581311971159], [34.76291786818, -119.08677694010407], [33.46341112743324, -117.42970498774226], [34.278091387876024, -116.41230893926185], [34.772410238538036, -119.29627188642445], [33.66351902557875, -117.37274366172184], [34.168621605570124, -118.06420487592466], [33.712408400637024, -116.81132520834308], [33.93382162524048, -117.89740327887331], [34.264183785238224, -116.0068505203353], [33.516068035203155, -117.23640712961713], [33.61613157626892, -116.07137130531223], [34.98181898115052, -118.44470987376354], [33.723310847100095, -117.68372897247076], [33.94756562630232, -116.02549656373016], [33.9026683535119, -117.49116432205454], [34.996190523569986, -117.2574678994494], [33.75278257617958, -118.05515018393793], [34.923067263790344, -117.41803598440669], [33.6289975126238, -117.22844621922549], [34.37464236392272, -116.24735723491007], [34.28220316438016, -117.4328348676602], [34.67076072258143, -118.7793613964028], [34.03949903451844, -116.38971259457013], [33.89326858516819, -117.59812839547835], [33.96812157357977, -117.34076937913315], [33.559873355339946, -116.46718929982609], [34.229588494854305, -118.94646177593843], [34.80233958300979, -119.66991659114645], [34.33532751171857, -116.79091766106991], [34.918775816481336, -116.83674178423355], [34.219713190245194, -118.58154416975984], [34.46832456526369, -118.2566751159896], [33.94472699596525, -117.21937071349589], [34.590734858941666, -119.85624672793264], [34.502437727159254, -117.50775825441708], [33.3071523239271, -117.04273984678306], [34.06254211789522, -116.06781507119253], [34.33845029126553, -117.15079223762213], [34.48371704744783, -119.0482315878776], [33.09278169849954, -116.08811127515916], [33.977955044627315, -119.82621007163397], [34.47927986446984, -118.24934162815815], [34.13039247475071, -119.11882439453566], [33.355351230972346, -116.77019345156475], [34.58744940413812, -116.89612807290008], [34.567247689225894, -119.05136118775603], [32.6931263469672, -116.98161664270944], [34.9449910101212, -116.42303360238816], [33.72863034454267, -116.23739308510132]]
    const addresses = [['93536, Lancaster, California'], ['92365, Newberry Springs, California'], ['93536, Lancaster, California'], ['92241, Desert Hot Springs, California'], ['92036, Julian, California'], ['14501-14899 Anson Ave, Santa Fe Springs, California, 90670'], ['820 S Coast Hwy, Oceanside, California, 92054'], ['93117, Goleta, California'], ['92371, Phelan, California'], ['92338, Ludlow, California'], ['93023, Ojai, California'], ['92220, Banning, California'], ['92239, Desert Center, California'], ['92543, Hemet, California'], ['34100-34398 Wilshire Rd, Lucerne Valley, California, 92356'], ['92365, Newberry Springs, California'], ['92307, Apple Valley, California'], ['4441 Lankershim Boulevard, North Hollywood, California, 91602'], ['92561, Mountain Center, California'], ['92036, Julian, California'], ['92342, Helendale, California'], ['92338, Ludlow, California'], ['15350 Stafford St, La Puente, California, 91744'], ['2700-2706 E Vineyard Ave, Oxnard, California, 93036'], ['18108 Haines St, Perris, California, 92570'], ['E Avenue B, Lancaster, California, 93535'], ['91901, Alpine, California'], ['92371, Phelan, California'], ['93254, New Cuyama, California'], ['92274, Thermal, California'], ['92220, Banning, California'], ['Capitan Grande Indian Reservation'], ['2429-2699 Wildhorse Meadows Rd, Angelus Oaks, California, 92305'], ['Und853, Campo, California, 91906'], ['93023, Ojai, California'], ['29556 Sierra Rojo Ln, Valley Center, California, 92082'], ['91390, Santa Clarita, California'], ['92274, Thermal, California'], ['92278, Twentynine Palms, California'], ['860 W Griswold Rd, Covina, California, 91722'], ['1008 Blinn Avenue, Wilmington, California, 90744'], ['93560, Rosamond, California'], ['7362 Spruce Cir, La Palma, California, 90623'], ['93254, New Cuyama, California'], ['Cleveland National Forest'], ['21868-22548 Viejas Grade Rd, Descanso, California, 91916'], ['92307, Apple Valley, California'], ['91701, Rancho Cucamonga, California'], ['92327, Daggett, California'], ['92347, Hinkley, California'], ['Joshua Tree National Park'], ['19301-19999 Palm Ln, Desert Hot Springs, California, 92241'], ['91708, Chino, California'], ['757 Coffee Pot Trl, Julian, California, 92036'], ['10433 Navajo Rd, Apple Valley, California, 92308'], ['93254, New Cuyama, California'], ['2958 Snow Line Dr, Pinon Hills, California, 92372'], ['28802-29206 Cruthers Creek Rd, Pearblossom, California, 93553'], ['93243, Lebec, California'], ['93561, Tehachapi, California'], ['92561, Mountain Center, California'], ['823 N Imperial Ave, Ontario, California, 91764'], ['1987-2829 S State St, Hemet, California, 92543'], ['92084, Vista, California'], ['92311, Barstow, California'], ['93553, Pearblossom, California'], ['34822-34918 De Portola Rd, Temecula, California, 92592'], ['92241, Desert Hot Springs, California'], ['Koala Rd, Adelanto, California, 92301'], ['92407, San Bernardino, California'], ['92239, Desert Center, California'], ['91390, Santa Clarita, California'], ['93535, Lancaster, California'], ['92342, Helendale, California'], ['92347, Hinkley, California'], ['93117, Goleta, California'], ['92555, Moreno Valley, California'], ['92368, Oro Grande, California'], ['12730 Fir St, Hesperia, California, 92344'], ['92536, Aguanga, California'], ['91905, Boulevard, California'], ['92278, Twentynine Palms, California'], ['92338, Ludlow, California'], ['92342, Helendale, California'], ['93516, Boron, California'], ['92679, Trabuco Canyon, California'], ['Lake Elsinore, California'], ['92036, Julian, California'], ['The Potholes'], ['93532, Lake Hughes, California'], ['92561, Mountain Center, California'], ['833 North Orcutt Avenue, Montebello, California, 90640'], ['42665 Duer Way, Hemet, California, 92544'], ['93561, Tehachapi, California'], ['Torres Martinez Indian Reservation'], ['91935, Jamul, California'], ['1681-1699 Canyon Lk, Santa Ana, California, 92705'], ['93254, New Cuyama, California'], ['92220, Banning, California'], ['90290, Topanga, California'], ['26176 Madison Ave, Murrieta, California, 92562'], ['92365, Newberry Springs, California'], ['2443 Calle San Clemente, Encinitas, California, 92024'], ['193 Figueroa Dr, Altadena, California, 91001'], ['93254, New Cuyama, California'], ['92040, Lakeside, California'], ['92252, Joshua Tree, California'], ['92301, Adelanto, California'], ['92301, Adelanto, California'], ['92676, Silverado, California'], ['92887, Yorba Linda, California'], ['92301, Adelanto, California'], ['Castaic, California'], ['92679, Trabuco Canyon, California'], ['92086, Warner Springs, California'], ['5512 Cathedral Oaks Rd, Santa Barbara, California, 93111'], ['93023, Ojai, California'], ['Ocotillo Wells Vehicular Rec Area'], ['17115 S Dalton Ave, Gardena, California, 90247'], ['92676, Silverado, California'], ['92259, Ocotillo, California'], ['92356, Lucerne Valley, California'], ['92311, Barstow, California'], ['9930 Custer Ave, Lucerne Valley, California, 92356'], ['California Hiking and Riding Trl, Desert Center, California, 92239'], ['91701, Rancho Cucamonga, California'], ['93252, Maricopa, California'], ['Joshua Tree National Park'], ['92338, Ludlow, California'], ['1117 N Willow Ave, Compton, California, 90221'], ['93015, Fillmore, California'], ['92284, Yucca Valley, California'], ['93060, Santa Paula, California'], ['92887, Yorba Linda, California'], ['92256, Morongo Valley, California'], ['91384, Castaic, California'], ['92241, Desert Hot Springs, California'], ['San Jacinto, California'], ['Solstice Canyon'], ['92241, Desert Hot Springs, California'], ['91384, Castaic, California'], ['92070, Santa Ysabel, California'], ['92823, Brea, California'], ['42000-42198 Via Beso del Sol, Temecula, California, 92591'], ['City of Malibu, Malibu, California'], ['Mission Bay, San Diego, California'], ['23837-23899 Holeman Way, Desert Hot Springs, California, 92241'], ['Und9084, Campo, California, 91906'], ['92338, Ludlow, California'], ['11800 Unknown Street Name, Sylmar, California, 91342'], ['92239, Desert Center, California'], ['885 Cold Springs Rd, Santa Barbara, California, 93108'], ['93225, Frazier Park, California'], ['9051 68th Ave, Thermal, California, 92274'], ['92305, Angelus Oaks, California'], ['92065, Ramona, California'], ['1138 Magnolia Ave, Santa Ana, California, 92707'], ['Adelanto, California'], ['92356, Lucerne Valley, California'], ['93510, Acton, California'], ['92311, Barstow, California'], ['92274, Thermal, California'], ['92260, Palm Desert, California'], ['91905, Boulevard, California'], ['92394, Victorville, California'], ['92278, Twentynine Palms, California'], ['92278, Twentynine Palms, California'], ['92070, Santa Ysabel, California'], ['600-661 Via Los Altos, Laguna Woods, California, 92637'], ['92382, Running Springs, California'], ['13801 Gladstone Ave, Sylmar, California, 91342'], ['92301, Adelanto, California'], ['93021, Moorpark, California'], ['93254, New Cuyama, California'], ['93254, New Cuyama, California'], ['14566-14668 San Bernardino Ave, Fontana, California, 92335'], ['92399, Yucaipa, California'], ['93023, Ojai, California'], ['S Lancaster Blvd, Edwards, California, 93524'], ['92004, Borrego Springs, California'], ['92311, Barstow, California'], ['1705 N Waterman Ave, San Bernardino, California, 92404'], ['93536, Lancaster, California'], ['92883, Corona, California'], ['32201-32341 Hinkley Rd, Barstow, California, 92311'], ['Joshua Tree National Park'], ['Pala Indian Reservation'], ['1805 E Jackman St, Lancaster, California, 93535'], ['92338, Ludlow, California'], ['15300-15346 Coconino Pl, Lake Hughes, California, 93532'], ['93510, Acton, California'], ['92274, Thermal, California'], ['93105, Santa Barbara, California'], ['92264, Palm Springs, California'], ['93003, Ventura, California'], ['Elm Ln, Yucca Valley, California, 92284'], ['145 Cloudbreak, Irvine, California, 92618'], ['92311, Barstow, California'], ['92368, Oro Grande, California'], ['91906, Campo, California'], ['32900-32924 Valley Center Rd, Valley Center, California, 92082'], ['91040, Sunland, California'], ['92040, Lakeside, California'], ['93561, Tehachapi, California'], ['Flabob Airport'], ['78200 Miles Ave, Indian Wells, California, 92210'], ['93225, Frazier Park, California'], ['Camp Pendleton Marine Corps Base'], ['57458-57514 Pine St, Landers, California, 92285'], ['93252, Maricopa, California'], ['Lake Elsinore Recreation Area'], ['530 Fairview Ave, Sierra Madre, California, 91024'], ['92544, Hemet, California'], ['935 Orangewood Dr, Brea, California, 92821'], ['92278, Twentynine Palms, California'], ['92590, Temecula, California'], ['92274, Thermal, California'], ['93561, Tehachapi, California'], ['Limestone Canyon Regional Park'], ['Joshua Tree National Park'], ['4111 Flat Rock Dr, Riverside, California, 92505'], ['Utility Rd, Hinkley, California, 92347'], ['Naval Weapons Station Seal Beach'], ['92301, Adelanto, California'], ['33805 Plowshare Rd, Wildomar, California, 92595'], ['92278, Twentynine Palms, California'], ['92407, San Bernardino, California'], ['93243, Lebec, California'], ['92284, Yucca Valley, California'], ['Butterfield Park'], ['1300-1308 Martin Luther King Blvd, Riverside, California, 92507'], ['92561, Mountain Center, California'], ['93012, Camarillo, California'], ['93254, New Cuyama, California'], ['92356, Lucerne Valley, California'], ['92365, Newberry Springs, California'], ['20538 Roscoe Boulevard, Winnetka, California, 91306'], ['91390, Santa Clarita, California'], ['25400 Sand Creek Trl, Moreno Valley, California, 92557'], ['93117, Goleta, California'], ['92371, Phelan, California'], ['92082, Valley Center, California'], ['Joshua Tree National Park'], ['92314, Big Bear City, California'], ['93060, Santa Paula, California'], ['92004, Borrego Springs, California'], ['93117, Goleta, California'], ['Agua Dulce, California'], ['93033, Oxnard, California'], ['Cleveland National Forest'], ['92356, Lucerne Valley, California'], ['Red Reef, Ojai, California, 93023'], ['La Presa, California'], ['92365, Newberry Springs, California'], ['81908-81920 Hoover Ave, Indio, California, 92201']]
    const index = new KDBush(points);
    const me = [34.0218555, -118.5157749]
    const results = index.within(me[0], me[1], .50).map(id => {return [points[id],addresses[id],distance(me[0],me[1],points[id][0],points[id][1])]});
    //const nearest = geokdbush.around(index, -119.7051, 34.4363, 1)
    results.sort(function(a, b) {
      return a[2] - b[2];
    });
    return (
        <div> {results.map((e,i) => {
           return( <div key={e}>{e[1] } {` ${Math.floor(e[2])} miles away `}</div>)
        })} </div>
    )
}

export default Geo
